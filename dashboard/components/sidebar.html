<!-- Components/Sidebar.html -->
<!-- Uses the same structure as dashboard-modular.html but extracted for cleaner management -->
<script>
// Redirect to dashboard-modular.html if this file is loaded directly
if (window.location.pathname.includes('sidebar.html') || window.location.pathname.includes('/components/sidebar')) {
    window.location.replace('../dashboard-modular.html');
}
</script>
        <div aria-expanded="true"
             class="hidden lg:block fixed h-full left-0 z-[41] cursor-e-resize aria-expanded:cursor-default bg-background/90 transition-[width] duration-150 backdrop-blur-md border-r group/sidebar"
             style="width:var(--eleven-sidebar-width,16rem)">
            <div id="sidebar-portal-root"></div>
            <a class="sr-only" href="#content">Skip to content</a>
            <div class="relative stack w-full h-full pb-3 overflow-hidden scroll-smooth max-h-screen">
                <div class="hstack justify-between items-center px-3 w-full relative z-20">
                    <div class="flex justify-between -mb-4 relative group/header-logo items-center w-full"
                         style="height:var(--eleven-header-height)">
                        <div class="flex opacity-100 group-aria-expanded/sidebar:group-focus-within/header-logo:opacity-100 group-focus-within/header-logo:opacity-0 group-aria-expanded/sidebar:group-hover/sidebar:opacity-100 group-hover/sidebar:opacity-0 transition-opacity duration-100">
                            <div class="flex items-center translate-x-[13px] group-aria-expanded/sidebar:translate-x-2 transition-transform duration-150">
                                <span class="artorize-brand-text">Artorize</span>
                            </div>
                        </div>
                        <div class="sidebar-toggle-btn-container transition-all absolute right-0.5 duration-100 translate-x-0">
                            <!-- Collapsed "A" brand - shown when collapsed and NOT hovering -->
                            <div class="artorize-collapsed-brand flex items-center justify-center h-8 w-8">
                                <span class="artorize-brand-text text-xl">A</span>
                            </div>
                            <!-- Expand icon button - shown when expanded OR when collapsed+hovering -->
                            <button data-state="closed"
                                    class="sidebar-expand-btn relative inline-flex items-center justify-center whitespace-nowrap text-sm font-medium focus-ring disabled:pointer-events-auto data-[loading='true']:!text-transparent bg-transparent hover:bg-gray-alpha-100 radix-state-open:text-foreground radix-state-open:bg-gray-alpha-200 active:bg-gray-alpha-200 disabled:bg-transparent disabled:text-gray-400 rounded-[10px] pointer-events-auto cursor-e-resize group-aria-expanded/sidebar:cursor-w-resize p-0 h-8 w-8 text-gray-500 hover:text-gray-alpha-950 duration-100 transition-colors">
                                <svg width="20px" height="20px" viewBox="0 0 20 20" fill="none"
                                     xmlns="http://www.w3.org/2000/svg" color="currentColor" class="w-5 h-5">
                                    <rect x="7" y="6.5" width="7" height="1.5" rx="0.75" transform="rotate(90 7 6.5)"
                                          fill="currentColor"></rect>
                                    <rect x="3" y="4" width="14" height="12" rx="2.8" stroke="currentColor" stroke-width="1.5"></rect>
                                </svg>
                            </button>
                        </div>
                    </div>
                </div>
                                <nav class="flex h-full flex-1 flex-col grow min-h-0" id="main-nav">
                                    <div class="relative flex flex-col grow fade-top-3 fade-bottom-3 w-full">                        <div class="relative stack overflow-y-auto no-scrollbar overflow-x-hidden grow w-full">
                            <ul class="w-fit stack gap-4 lg:gap-5 shrink-0 p-3.5 pb-2 absolute top-0 left-0 right-0"
                                aria-label="Main navigation" style="opacity:1;transform:none">
                                <li>
                                    <!-- Simplified navigation - Export protector -->
                                    <ul class="stack gap-1">
                                        <li class="group w-full">
                                            <div class="relative w-fit">
                                                <a class="block w-fit rounded-lg outline-foreground" href="/dashboard/dashboard-modular.html">
                                                    <div class="relative group rounded-lg overflow-hidden bg-transparent transition-all duration-150 !bg-gray-alpha-100 !text-gray-alpha-950 w-[calc(var(--eleven-sidebar-width)-1.8125rem)] hover:text-gray-alpha-950 hover:bg-gray-alpha-100 group-aria-expanded/main-nav-item:bg-gray-alpha-100 group-aria-expanded/main-nav-item:text-gray-alpha-950 text-gray-600"
                                                         data-state="closed">
                                                        <div class="flex items-center gap-2 px-1.5 min-w-36">
                                                            <div class="center h-8">
                                                                <svg width="1.25rem" height="1.25rem" viewBox="0 0 24 24"
                                                                     fill="none" stroke="currentColor" stroke-width="1.5"
                                                                     stroke-linecap="round" stroke-linejoin="round">
                                                                    <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
                                                                    <path d="m9 12 2 2 4-4"/>
                                                                </svg>
                                                            </div>
                                                            <div class="flex items-center justify-between flex-1 h-8 transition-all duration-150 group-aria-expanded/sidebar:opacity-100 opacity-0 translate-x-1 group-aria-expanded/sidebar:translate-x-0">
                                                                <p class="text-sm font-medium whitespace-nowrap max-w-[168px] truncate">
                                                                    Export protector</p>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </a>
                                            </div>
                                        </li>
                                    </ul>
                                <li aria-label="History"><h2
                                        class="text-sm font-medium text-gray-alpha-500 ml-1.5 mb-1.5 whitespace-nowrap group-aria-expanded/sidebar:opacity-100 opacity-0 transition-opacity duration-150 flex items-center gap-1.5">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="1rem" height="1rem" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                                            <path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"></path>
                                            <path d="M3 3v5h5"></path>
                                            <path d="M12 7v5l4 2"></path>
                                        </svg>
                                    History</h2>
                                    <ul id="editing-history-list" class="stack gap-0.5">
                                        <!-- History items will be populated by JavaScript -->
                                    </ul>
                                    <div class="flex items-center gap-2 ml-3 mt-2 group-aria-expanded/sidebar:opacity-100 opacity-0 transition-opacity duration-150">
                                        <button type="button"
                                                id="view-all-history-btn"
                                                onclick="toggleHistoryModal()"
                                                class="flex items-center gap-1 text-xs text-gray-alpha-500 hover:text-gray-alpha-950 transition-colors duration-150">
                                            View all history
                                            <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                                <path d="M5 12h14"></path>
                                                <path d="m12 5 7 7-7 7"></path>
                                            </svg>
                                        </button>
                                    </div>
                            </ul>
                        </div>
                    </div>
                    <div class="mt-auto stack">
                        <!-- Platform Switcher (Bottom Position) -->
                        <div class="relative px-3.5 mb-2">
                            <div class="relative w-full">
                                <button type="button" 
                                        id="platform-switcher-trigger"
                                        aria-haspopup="menu" 
                                        aria-expanded="false" 
                                        data-state="closed"
                                        class="flex items-center justify-between w-full h-9 px-2 text-sm bg-transparent hover:bg-gray-alpha-100 rounded-lg transition-colors outline-none focus:ring-1 focus:ring-foreground group-aria-expanded/sidebar:w-[calc(var(--eleven-sidebar-width)-1.8125rem)]"
                                        onclick="window.togglePlatformDropdown()">
                                    
                                    <!-- Content Container -->
                                    <div class="flex items-center gap-2 w-full overflow-hidden">
                                        <!-- Collapsed State: Icon Box -->
                                        <div class="flex items-center justify-center w-5 h-5 rounded bg-foreground text-background shrink-0 group-aria-expanded/sidebar:hidden">
                                            <span class="text-[10px] font-bold">S</span>
                                        </div>
                                        
                                        <!-- Expanded State: Text Label -->
                                        <span id="platform-label-display" class="text-[15px] font-semibold text-foreground truncate hidden group-aria-expanded/sidebar:block tracking-tight">Static Edit</span>
                                    </div>

                                    <!-- Chevron (Expanded only) -->
                                    <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-3.5 h-3.5 opacity-50 shrink-0 hidden group-aria-expanded/sidebar:block ml-2">
                                        <path d="m7 15 5 5 5-5"></path>
                                        <path d="m7 9 5-5 5 5"></path>
                                    </svg>
                                </button>

                                <!-- Dropdown Content (Opens Upwards) -->
                                <div id="platform-dropdown-content"
                                     class="hidden absolute bottom-full left-0 z-[100] w-[200px] mb-2 p-1 bg-background border border-gray-200 rounded-md shadow-lg origin-bottom-left animate-in slide-in-from-bottom-2 fade-in-0"
                                     role="menu">
                                    <button class="flex items-center w-full px-2 py-1.5 text-sm text-foreground rounded-sm hover:bg-gray-100 outline-none select-none"
                                            role="menuitem"
                                            onclick="window.selectPlatform('static-edit', 'Static Edit')">
                                        Static Edit
                                        <svg id="check-static-edit" class="ml-auto w-3.5 h-3.5 opacity-100" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                                            <polyline points="20 6 9 17 4 12"></polyline>
                                        </svg>
                                    </button>
                                    <button class="flex items-center w-full px-2 py-1.5 text-sm text-foreground rounded-sm hover:bg-gray-100 outline-none select-none"
                                            role="menuitem"
                                            onclick="window.selectPlatform('shared-artworks', 'Shared Artworks')">
                                        Shared Artworks
                                        <svg id="check-shared-artworks" class="ml-auto w-3.5 h-3.5 opacity-0" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                                            <polyline points="20 6 9 17 4 12"></polyline>
                                        </svg>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div class="relative w-48 mb-1"></div>
                        <div class="px-3.5 mb-1">
                            <div class="relative">
                                <ul class="stack gap-1">
                                    <li class="group w-full">
                                        <div class="relative w-fit"><a class="block w-fit rounded-lg outline-foreground"
                                                                       href="https://docs.artorizer.com" target="_blank">
                                            <div class="relative group rounded-lg overflow-hidden bg-transparent transition-all duration-150 w-[calc(var(--eleven-sidebar-width)-1.8125rem)] hover:text-gray-alpha-950 hover:bg-gray-alpha-100 group-aria-expanded/main-nav-item:bg-gray-alpha-100 group-aria-expanded/main-nav-item:text-gray-alpha-950 text-gray-600"
                                                 data-state="closed">
                                                <div class="flex items-center gap-2 px-1.5 min-w-36">
                                                    <div class="center h-8">
                                                        <svg xmlns="http://www.w3.org/2000/svg" width="1.25rem"
                                                             height="1.25rem" viewBox="0 0 24 24" fill="none"
                                                             stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                                             stroke-linejoin="round" class="lucide lucide-square-code">
                                                            <path d="M10 9.5 8 12l2 2.5"></path>
                                                            <path d="m14 9.5 2 2.5-2 2.5"></path>
                                                            <rect width="18" height="18" x="3" y="3" rx="2"></rect>
                                                        </svg>
                                                    </div>
                                                    <div class="flex items-center justify-between flex-1 h-8 transition-all duration-150 group-aria-expanded/sidebar:opacity-100 opacity-0 translate-x-1 group-aria-expanded/sidebar:translate-x-0">
                                                        <p class="text-sm font-medium whitespace-nowrap max-w-[168px] truncate">
                                                            Developers</p></div>
                                                </div>
                                            </div>
                                        </a></div>
                                </ul>
                            </div>
                        </div>
                        <div class="relative px-3.5 mt-1">
                            <button data-testid="user-menu-button" aria-label="Your profile"
                                    class="group w-full relative items-center gap-0.5 h-11 shrink-0 justify-between flex rounded-lg text-sm leading-6 font-semibold outline-foreground w-[calc(var(--eleven-sidebar-width)-1.5rem)] transition-all duration-150 group-aria-expanded/sidebar:hover:bg-gray-alpha-100"
                                    type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:r1fh:"
                                    data-state="closed">
                                <div class="shrink-0 relative group-aria-expanded/sidebar:translate-x-1 -translate-x-1 transition-transform duration-150">
                                    <div class="relative">
                                        <div class="flex" style="opacity:1">
                                            <div class="opacity-100 transition-opacity duration-300 css-2c8lkk"
                                                 aria-valuemax="100" aria-valuemin="0" aria-valuenow="0" role="progressbar">
                                                <svg viewBox="0 0 100 100" class="css-bj12qo">
                                                    <circle cx="50" cy="50" r="42" stroke-width="4px"
                                                            class="chakra-progress__track css-131d71n"></circle>
                                                    <circle cx="50" cy="50" r="42" stroke-width="4px"
                                                            class="chakra-progress__indicator css-osbmls"
                                                            stroke-linecap="round" stroke-dashoffset="66"
                                                            stroke-dasharray="0 264"></circle>
                                                </svg>
                                            </div>
                                        </div>
                                        <div class="absolute top-0 left-0 h-full w-full rounded-full p-px"
                                             style="transform:scale(0.7);opacity:1"><img
                                                class="rounded-full shrink-0 bg-gray-50 object-cover h-full w-full"
                                                data-sidebar-user-avatar
                                                src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ccircle cx='50' cy='50' r='50' fill='%236366f1'/%3E%3Ctext x='50' y='50' text-anchor='middle' dy='.35em' fill='white' font-size='40' font-family='system-ui'%3EU%3C/text%3E%3C/svg%3E"
                                                alt="User"></div>
                                    </div>
                                </div>
                                <div class="overflow-hidden flex items-center justify-between flex-1 h-11 transition-all duration-150 group-aria-expanded/sidebar:opacity-100 opacity-0 translate-x-1 group-aria-expanded/sidebar:translate-x-0 rounded-lg pl-2 pr-2">
                                    <div class="text-start overflow-hidden"><p aria-hidden="true"
                                                                               class="text-sm text-foreground font-medium truncate inter" data-sidebar-user-name>
                                        User
                                        </p><div style="height:auto;opacity:1"><p aria-hidden="true"
                                                                            class="text-xs font-normal truncate -mt-0.5 overflow-ellipsis inter text-gray-alpha-500" data-sidebar-user-workspace>
                                            My Workspace</p></div>
                                    </div>
                                    <div class="flex h-4 w-4 items-center justify-center opacity-50 rotate-90 transition-transform duration-100 [button[data-state=open]_&amp;]:rotate-0">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                             fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                             stroke-linejoin="round"
                                             class="lucide lucide-chevron-right h-4 w-4 min-w-fit">
                                            <path d="m9 18 6-6-6-6"></path>
                                        </svg>
                                    </div>
                                </div>
                            </button>
                        </div>
                    </div>
                </nav>
            </div>
        </div>